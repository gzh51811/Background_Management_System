"use strict";function _toConsumableArray(t){if(Array.isArray(t)){for(var e=0,a=Array(t.length);e<t.length;e++)a[e]=t[e];return a}return Array.from(t)}document.addEventListener("DOMContentLoaded",function(){function e(){for(var t=0;t<$(".img_sort").length;t++)$(".img_sort").eq(t).prop("src","../img/jiantou.png")}function a(t){for(var e=[].concat(_toConsumableArray(document.querySelectorAll(".one"))),a=0;a<e.length;a++)t?$(e[a].parentElement).addClass("layui-form-checked"):$(e[a].parentElement).removeClass("layui-form-checked")}function n(){var t="sort="+Cookie.getCookie("sort")+"&desc="+Cookie.getCookie("desc");$.ajax({type:"get",url:"/api/classifyList",data:t,success:function(t){$("#bit").val(Cookie.getCookie("qty")),$("tbody").html(t.data.map(function(t,e){return'<tr data-id="'+t._id+'">\n                    <td style="text-align:center">\n                        <div class="layui-unselect layui-form-checkbox " lay-skin="primary" data-id="'+t._id+'">\n                            <i class="layui-icon layui-icon-ok one"></i>\n                        </div>\n                    </td>\n                    <td style="text-align:center">'+(e+1)+'</td>\n                    <td style="text-align:center">'+t.classify+'</td>\n                    <td style="text-align:center">'+t.time+'</td>\n                    <td data-id="'+t._id+'" style="text-align:center">\n                        <button class="layui-btn layui-btn-sm">\n                            <i class="layui-icon compile"></i>\n                        </button>\n                        <button class="layui-btn layui-btn-primary layui-btn-sm ">\n                                <i class="layui-icon cancel"></i>\n                        </button>\n                        \n                    </td>\n                </tr>'}).join(","))}})}userShow(),$("thead").on("click","img",function(t){t=event||window.event;$(t.target).hasClass("sheng")&&(e(),$(t.target).prop("src","../img/jiantou1.png"),Cookie.setCookie("sort",$(t.target).parent().attr("data-type")),Cookie.setCookie("desc",1),n()),$(t.target).hasClass("jiang")&&(e(),$(t.target).prop("src","../img/jiantou1.png"),Cookie.setCookie("sort",$(t.target).parent().attr("data-type")),Cookie.setCookie("desc","-1"),n())}),function(){for(var t=0;t<$("thead>tr>th").length;t++)$("thead>tr>th").eq(t).attr("data-type")==Cookie.getCookie("sort")&&(1==Cookie.getCookie("desc")?$("thead>tr>th").eq(t).children().eq(0).prop("src","../img/jiantou1.png"):-1==Cookie.getCookie("desc")&&$("thead>tr>th").eq(t).children().eq(1).prop("src","../img/jiantou1.png"))}(),$(".layui-body").on("click",function(t){t=event||window.event;$(t.target).hasClass("one")&&($(t.target).parent().hasClass("layui-form-checked")?$(t.target).parent().removeClass("layui-form-checked"):$(t.target).parent().addClass("layui-form-checked"),!function(){for(var t=[].concat(_toConsumableArray(document.querySelectorAll(".one"))),e=0;e<t.length;e++)if(0==[].concat(_toConsumableArray(t[e].parentElement.classList)).includes("layui-form-checked"))return!1;return!0}()?$(".all").parent().removeClass("layui-form-checked"):$(".all").parent().addClass("layui-form-checked"))}),$(".layui-body").on("click",$(".all"),function(t){t=event||window.event;$(t.target).hasClass("all")&&($(t.target).parent().hasClass("layui-form-checked")?($(t.target).parent().removeClass("layui-form-checked"),a(!1)):($(t.target).parent().addClass("layui-form-checked"),a(!0)))}),$(".top").on("click",function(t){t=event||window.event;if($(t.target).hasClass("addAll")&&(location.href="../html/addclassify.html"),$(t.target).hasClass("deteleAll")){var e=function(){for(var t=[],e=0;e<document.querySelectorAll("tbody>tr>td>div").length;e++)$(document.querySelectorAll("tbody>tr>td>div")[e]).hasClass("layui-form-checked")&&t.push($(document.querySelectorAll("tbody>tr>td>div")[e]).attr("data-id"));return t}(),a=JSON.stringify(e);console.log(a),0<e.length?confirm("是否删除所选商品信息")&&$.ajax({type:"get",url:"/api/classifyList/cancelMany",data:"_id="+a,success:function(t){1==t.code?(alert("删除成功"),$(".all").parent().removeClass("layui-form-checked"),n()):alert("删除失败")}}):alert("请选择需要删除的数据")}}),$("tbody").on("click",function(t){t=event||window.event;if($(t.target).hasClass("compile")&&(location.href="../html/addclassify.html?_id="+$(t.target).parent().parent().attr("data-id")),$(t.target).hasClass("cancel")){var e=$(t.target).parent().parent().attr("data-id");confirm("是否删除该条商品信息")&&$.ajax({type:"get",url:"/api/classifyList/cancel",data:"_id="+e,success:function(t){1==t.code?(alert("删除成功"),n()):alert("删除失败")}})}}),n()});